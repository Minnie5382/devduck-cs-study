## 2. 데이터를 주고받는 원리를 알아보자

05. 프로토콜
    프로토콜은 통신 규약이다.(데이터의 구성, 주고 받는 절차 등 각종 결정 사항과 기준이 정의 되어 있음)
    같은 프로토콜을 사용하면 다른 기기 간에도 통신할 수 있지만 프로토콜이 다르면 기기가 같아도 통신할 수 없다.

06. 네트워크 계층
    네트워크를 계층으로 나누고 각 계층이 다른 역할을 하면 낭비를 없앨 수 있다.
    프로토콜 스택: 어떤 프로토콜의 페이로드에 다른 프로토콜의 헤더와 페이로드가 들어가 계층 구조처럼 되어 있는 상태(프로토콜 = 헤더(프로토콜 정보) + 페이로드(전송하려는 데이터 그 자체))

07. 네트워크 모델
    - OSI 참조 모델: 네트워크 계층 모델을 7계층으로 나눈 모델, 프로토콜을 계층 구조로 만든 개념(1977년에 제정되어 당시 기술을 기반으로 하기에 현재는 그대로 구현한 장비나 네트워크는 거의 없으나 계층을 구분하는 하나의 모델로 이용되고 있다.)
    - TCP/IP 모델: 인터넷을 기준으로 한 네트워크 통신 모델. 4계층 모델이다.

08. TCP/IP
    인터넷에서 통신할 때 사용하는 기본 프로토콜
    식별자로 IP주소를 사용하기 때문에 TCP/IP라고 하지만 프로토콜 자체로는 IP 프로토콜, UDP 프로토콜, TCP 프로토콜로 분류된다.
      - IP 프로토콜: IP 주소를 참조하여 데이터 본체(페이로드)를 올바른 목적지에 전송하는 최소한의 절차와 규칙을 규정한다.
      - UDP 프로토콜: 포트 번호(식별자)를 부여하여 IP 주소가 나타내는 사용자나 애플리케이션 종류를 지정하는데 포트 번호를 부여할 뿐 처리 과정은 IP 프로토콜과 비슷하다(실시간 스트리밍, 온라인 게임)
      - TCP 프로토콜: 포트 번호가 부여되어 있을 뿐 아니라 오류 검사나 재전송 처리 등 일련의 과정도 규정되어 있고 세션 통신을 수행하는 기능도 있다.(웹 페이지 로딩, 이메일, 파일 전송)
        * UDP 프로토콜과 TCP 프로토콜의 차이: UDP 프로토콜은 수신 확인이나 전송 오류 확인, 재전송 처리 등은 수행하지 않고 단순히 목적지만 지정해서 전송하기 때문에 연결 설정 및 유지에 소요되는 시간을 줄일 수 있어 데이터 전송 속도가 빠르다.
          반면에 TCP 프로토콜은 패킷이 오류나 손실이 있는경우 재전송을 시도하고 순서가 바뀌면 재배열 하므로 신뢰성과 확실성을 높여 안정적인 통신을 할 수 있다.
        * IP 프로토콜과 UDP 프로토콜이 처리 과정은 비슷할 지라도 작동하는 계층이나 기능, 목적은 다르다. IP 프로토콜은 네트워크 계층이고 UDP 프로토콜은 전송 계층이다.
          IP 프로토콜은 주로 라우팅(데이터 패킷이 소스(출발지)로부터 목적지 까지 전달되는 과정)과 주소 지정에 초점을 맞추지만 UDP 프로토콜은 빠르고 간단한 데이터 전송에 초점을 맞춘다.

 09. IP 주소
     IP 주소: 출발지나 목적지를 식별하는 주소로 사용되는 데이터. IP 주소에는 인터넷에서 사용하는 글로벌 IP 주소와 LAN 내에서 사용하는 프라이빗 IP 주소가 있다. 32비트로 된 데이터이며, 32비트를 8비트씩 4등분해서 8비트의 10진수로 표시할 때 점으로 구분하여 표기한다.
8비트(=1바이트) 단위를 네트워크 에서는 옥텟이라고 한다. 32비트면 주소를 약 43억개 사용할 수 있다. 즉, 컴퓨터나 장치를 약 43억개 고유하게 연결할 수 있다는 의미지만 실제로 주소 공간을 43억 개 모두 사용할 수 있는 것은 아니다.(그 이유는 1.예약된 주소: IPv4에서는 특정 주소들이 특별한 용도로 예약되어 있어 일반적은 네트워크 장치에서는 사용할 수 없다. 예로는 로컬 호스트 주소와 사설 네트워크 주소가 있다. 2. 특수 목적 주소: 예를 들어, 네트워크 주소나 브로드캐스팅 주소는 특정 네트워크 내에서만 의미를 가지므로 전체 사용 공간에서 제외 된다.)
  - 글로벌 IP 주소: 주소 공간 중 인터넷 주소로 사용할 수 있는 것. 이 주소를 가진 기기는 인터넷상에서 하나뿐이므로, 이 주소를 지정하면 전 세계 기기와 통신할 수 있다.
  - 프라이빗 IP 주소: 인터넷에서 사용할 수 없는, 인터넷에 직접 연결되지 않는 LAN 내부 등의 주소 공간에서 사용하는 IP 주소. 인터넷에서 사용하지 않으므로 LAN마다 중복되지 않게 관리하면 다른 사무실이나 LAN에서 같은 IP 주소를 사용해도 문제 없다.
  * 인터넷에서 개인을 식별할 때는 IP 주소를 이용한다. 하지만 간단하지 않고, 식별할 수 없을 때도 있다. 인터넷상의 IP주소는 단지 네트워크에 연결된 라우터나 서버, 일부 컴퓨터를 가리킬 뿐이며 패킷의 IP 주소로 발신자를 식별하려면 라우터나 서버의 로그 정보로 패킷 출처를 파악해야 한다. 그러나 여기서 로그 정보로 특정할 수 있는 것은 어떤 컴퓨터(LAN 내부 단말기의 프라이빗 IP 주소)가 사용되었는지, 어떤 로그인 계정이 사용되었는지 정도이며 실제 조작을 한 사람이 누구인지는 알 수 없다.

  10. IPv4/IPv6
      (v4와 v6는 프로토콜의 버전을 나타내며 v4와 v6사이에 프로토콜 호환성은 없고, 현재 인터넷에는 이 두 프로토콜이 혼재되어 있다.)
      차이점
      IP 주소의 길이: IPv4는 4옥텟(32비트), IPv6는 16옥텟(128비트)로 IP 주소를 나타낸다.
      IPv6는 2의 128제곱이라는 많은 주소 공간을 갖고있어 주소가 고갈될 염려는 없지만, IPv4와의 호환성이 없으므로 IPv6로 인터넷에 연결하려면 IPv6와 호환되는 앱이나 서비스를 이용해야 한다.
      IPv6의 특징
       * 프로토콜 수준에서 암호화 통신이 규정되어 있다.(IPv6 프로토콜 자체가 네트워크 통신의 보안을 강화하는 기능(IPsec (인터넷 프로토콜 보안))이라는 기술을 내장하고 있다. IPv4에서도 이 기능을 사용할 수는 있지만 IPv6와 같이 기본적으로 내장된 기술은 아니다.)
       * MAC 주소를 이용하여 IPv6 주소를 자동으로 생성할 수 있고, 2계층을 포함한 설정 자동화가 가능하다.
       * 헤더가 IPv4보다 단순해서 처리가 간단하다.
       * 계층 구조가 엄격하여 라우팅 효율이 좋다.
      현재 IPv4와 IPv6 패킷은 인터넷에 혼재되어 있고 IPv4가 금지된 것이 아니므로 전 세계 서버 및 웹 서비스 등은 IPv4를 기반으로 동작하고 있다.

11. MAC 주소
    -MAC 주소: MAC 주소는 기기나 단말기가 고유하게 가지는 식별자이다.(IEEE가 관리하며, 전 세계 기기 제조사에 할당하고 있다.)
    네트워크 카드, 스마트폰, 라우터, 스위치, IoT 가전제품 등 네트워크에 연결되는 모든 기기에 하나씩 부여되는 식별자이다.
    48비트 길이이고 그 중 상위 24비트를 벤더 코드(OUI 식별자)로 장비 제조사에 할당한다.(제조사는 여러개의 벤더 코드를 가질 수 있다.)
    하위 24비트(노드 번호)는 각 제조사의 책임하에 제품에 하나씩 할당된다.
    - MAC 주소와 IP 주소의 차이
      MAC 주소는 이더넷 프레임(2계층)에서 장치나 단말기의 식별자로 사용되고, IP 주소는 TCP/IP(3계층) 프로토콜에서 출발지나 목적지의 장치나 네트워크 식별자로 사용된다

  12. ARP
      IP 주소에서 해당 장비의 MAC 주소를 확인하는 프로토콜. IP 주소 정보를 전송하고 특정 대상과 통신하기 위해 질의 한다.
      일반적으로 LAN에서는 허브나 라우터가 네트워크를 묶어준다. 이 네트워크에서 각 장치 연결은 이더넷을 사용하지만, 연결된 장치에서 실행되는 애플리케이션은 주로 TCP/IP 프로토콜을 사용한다.
      장치끼리 통신할 때는 MAC주소가 필요하지만, MAC 주소는 2계층 이하이므로 애플리케이션은 IP 주소를 알고 있어도 MAC 주소는 모른다.
      그래서 LAN내에서 패킷을 교환하려면 해당 IP 주소가 LAN 내 어느 MAC 주소를 가진 장의 것인지 확인하고 이더넷 프레임을 구성해야 하는데 이때 사용되는것이 ARP이다.
      IP 주소 정보를 네트워크로 내보내면 알고 있는 장치(호스트)가 MAC 주소를 알려준다.

      작동 방식
      1. ARP는 MAC주소를 알고자 하는 IP 주소 정보를 LAN에 대상을 지정하지 않고 전송한다.(LAN내의 모든 장치에 대상을 지정하지 않고 패킷을 전송하는것을 브로드캐스트라고 함)
      2. 모든 장치가 브로드캐스트 패킷을 수신하므로 IP 주소에 대한 패킷을 수신하면 해당 장치는 자신의 MAC 주소를 회신한다.
      이것이 기본 작동 방식이지만 실제로 이렇게 통신할 때마다 모든 기기에 브로드캐스트 하는 것은 효율적이지 않기 때문에 허브나 라우터에 LAN내 모든 기기의 IP 주소와 MAC 주소의 대응표를 만들어 두고 각 장비가 허브나 라우터에 문의하면 LAN내의 모든 장비의 MAC 주소를 허브나 라우터가 알려주는 경우가 많다.
(이때 LAN 내의 각 장치가 허브나 라우터에 주소 테이블을 물어보려면 결국 라우터의 IP 주소도 알고 있어야 한다. 그래서 일반적인 LAN에서는 라우터처럼 네트워크를 묶는 장치의 IP 주소를 기본 게이트웨이로 설정하고 거기서 TCP/IP에서 각 장치가 모르는 정보나 외부 통신 등을 모두 담당하는 역할을 한다. 각 장치는 관리나 문의 패킷을 일단 기본 게이트웨이로 보낸다.)

  13. 포트 번호
      TCP/UDP 프로토콜에서 사용되는 식별자(TCP/UDP 헤더의 처음 16비트(2옥텟) 정보)
      IP 주소만으로는 알 수 없는 LAN내 장치나 단말기, 상위 프로토콜이 이용하는 애플리케이션 종류 애플리케이션의 클라이언트 등을 지정한다.

      역할
       IP 주소는 목적지 서버를 지정할 수는 있지만, 해당 서버의 어떤 앱을 사용할지는 지정할 수 없다. 목적지 포트 번호는 패킷이 어떤 애플리케이션을 위한 것인지 나타내는 번호로 지정된다.
       출발지 포트 번호에는 패킷을 보낸 쪽 사용자와 터미널을 식별하는 번호를 지정한다.(어디서 온 건지는 IP 주소로 알 수 있지만, 출발지에서도 이메일을 보낸 계정이나 웹 사이트에 엑세스한 기기 등을 식별할 필요가 있다.)

       - 잘 알려진 포트: 인터넷에서 주요 애플리케이션의 포트 번호로 0-1023을 할당하는 것이 관례인데 이 0-1023을 말함(이메일, HTTP,DNS 등)
       - 등록된 포트: 1024~49151, 기존 애플리케이션에서 보조적으로 사용중 주요 공급 업체 제품 및 앱에 할당된 포트
       - 다이내믹/프라이빗 포트: 개인이나 기업이 자체 애플리케이션이나 서비스용으로 자유롭게 사용 가능
     실제 LAN 내 IP 주소는 프라이빗 IP 주소이며, 인터넷에서는 라우터나 서버등 LAN을 구성하는 장치까지만 특정할 수 있다. 따라서 포트 번호가 필요하다.

  14. 회선 교환 방식
      기존 전화 시스템으로 대표되는 통신 방식의 명칭, 통신 상대와 일대일 연결을 설정해서 통신하는 방식. 현재에도 유선전화에서는 원리적으로 이 방식을 채택하고 있다.

      유선 전화의 통신 방식
      전화는 음성을 마이크를 통해 아날로그 신호로 바꾸고 이를 전선에 실어 보내 상대방 스피커에서 재생한다. 다만 이 경우 모든 통화 상대는 전선으로 연결되어 있어야 하는데, 중간에서 교환원이 개입하여 걸려 온 번호와 지정한 번호의 전성을 연결해 준다.
      교환대까지 선을 깔아 놓으면 그 교환대에 연결된 상대 누구와도 통화가 가능하다. 교환대에 다른 지역의 교환대와 연결하는 포트를 추가하면 그 지역과도 연결할 수 있다. 상위 교환대는 지역 내 교환대별 연결을 처리함으로써 국내 전역과 해외까지 커버할 수 있고,
      전화번호가 지역번호, 시외 전화번호, 국가 번호 등 계층 구조로 되어 있는 이유는 바로 이 때문이다. 현재는 전화번호의 신호(펄스타 톤)를 식별해서 기계나 컴퓨터가 연결을 처리하고, 중간 회선으로 마이크로웨이브 등 무선 기술, 디지털 회선, 광섬유 등이 사용되지만 기본 원리는 동일하다.

      회선 교환 방식의 특징
      유선 전화의 통신 방식을 회선 교환 방식이라고 한다. 회선 교환 방식의 특징은 일대일 연결을 설정하므로, 연결이 설정되면 해당 회선은 양측이 독점한다. 즉, 통화중 상태가 됨. 회선 교환 방식은 교환기 구성이 복잡해지고 회선 유지 보수 및 관리에 비용이 들어간다.
      음성이든 데이터든 통신량이 방대해지면, 하나의 통신에 하나의 회선을 전용으로 쓰는 방식은 효율적이지 않다. 현재는 지역 전화국 이후의 통신은 대부분 디지털화되어 있고 신호도 다중화되어 있다.

# 데이터를 주고받는 원리를 알아보자

## 1. 프로토콜🤙 == 약속

### 통신규약인 프로토콜

- 프로토콜
  - '어느 부분이 목적지 데이터인지, 어느 부분이 신호 데이터 인지, 어디서부터 어디까지가 주고받고자 하는 데이터 본체인지'의 대한 약속
  - 같은 프로토콜이면 다른 기기 간에도 통신 가능(프로토콜이 다르면 같은 기기도 통신x)

#### 프로토콜의 종류

    - IEEE 802.3: IEEE가 규정하는 이더넷 규격의 프로토콜. 랜 케이블 등이 사용됨
    - IEEE 802.11: IEEE가 규정하는 무선 LAN 규격의 프로토콜. Wi-Fi로 보급되어 있음
    - IP(internet Protocol): 여러 네트워크를 연결하는 프로토콜. 인터넷을 구성하고 있음
    - ARP(address Resolution Protocol): IP 주소에서 각 기기가 갖고 있는 MAC주소를 알아내는 프로토콜
    - TCP(Transmission Control Protocol): 인터넷 등에서 상위 계층과 신뢰성을 높여 통신하는 프로토콜
    - UDP(User Datagram Protocol): 인터넷 등에서 상위 계층과 속도와 편의성을 우선하여 통신하는 프로토콜
    - POP(Post Office Protocol): 이메일 수신 프로토콜
    - SMTP(Simple Mail Transfer Protocol): 이메일 송신 프로토콜
    - HTTP(Hypertext Transfer Protocol): 웹 브라우저와 웨 서버 간 통신 프로토콜
    - DNS(Domain Name System): DNS서버에서 IP주소를 문의해서 도메인 이름을 IP주소로 변환하는 프로토콜

<hr/>

## 2. 네트워크 계층

#### 효율적으로 통신하기 위한 계층구조

### 계층별로 나누어 처리해서 낭비를 없앤다

    상대방이 내가 보낸 이메일을 볼 때 사용되는 네트워크, 프로토콜, OS, 애플리케이션은 다 다르다.
    각 애플리케이션에서 데이트터를 변환하고 송수신하는 과정까지 전부하면 프로그램은 정말 복잡해지고 낭비도 많아질 것이다.
    --> 네트워크를 하드웨어, 프로토콜, 애플리케이션이라는 계층(레이어)로 나누어 처리 분담.

### 프로토콜 스택의 처리 원리

    프로토콜의 차이는 프로토콜 스택이라는 계층 구조를 이용해 처리

- 프로토콜
  - 헤더: 프로토콜 정보, 예를 들어 우편물 주소나 종류 같은 정보
  - 페이로드: 전송하려는 데이터 그 자체
    하위 계층 프로토콜의 페이로드에 상위계층의 헤더와 페이로드 포함
    -> 해당 프로토콜 계층은 자신의 헤더 정보만 해석해서 페이로드를 상위 네트워크에 전달
    -> 페이로드는 상위계층의 헤더와 페이로드로 되어있기 때문에 상위 네트워크의 프로토콜이 제대로 처리가능

<hr/>

## 3. 네트워크 모델

#### 각 기기가 통신하는 계층의 모델

### 프로토콜을 7개로 나눈 OSI 참조 모델

    OSI참조모델은 ISO에서 제정한 네트워크 계층 모델
    7계층으로 나뉘어 있음
    현재는 그대로 사용x
    계층 구조로 만들면 애플리케이션은 연결되는 컴퓨터나 케이블의 차이를 처리할 필요x-> 장비나 소프트웨어 개발이 용이
    계층으로 분리되므로 시스템을 프로토콜 스택개념으로 설계와 개발을 할 수 있다.
    인터넷이 컴퓨터나 스마트폰에서 동일하게 엑세스할 수 있는 이유는 네트워크 계층 구조와 프로토콜 스택덕분이다.

- 각각의 계층, 주요 프로토콜과 규격
  - 7(응용계층): SMTP, POP, HTTP, DNS, FTP 등(이메일, 웹 브라우저 등 앱 수준의 규약이나 데이터를 처리)
  - 6(표현계층): SMTP, 텔넷, FTP 등(문자 코드, 이미지, 동영상 포맷 등을 처리)
  - 5(세션계층): TLS 등(특정 통신 대상과 계속적인 연결상태를 관리)
  - 4(전송계층): TCP, UDP 등(특정 통신 대상으로 보낼 개개의 데이터 전송을 처리)
  - 3(네트워크계층): IP, ARP, RARP, ICMP 등(네트워크 내의 세그먼트 간 통신을 처리)
  - 2(데이터 링크 계층): PPP(다이얼업 연결), IEEE 802.3(이더넷), IEEE 802.11(무선 LAN) 등(세그먼트 내 컴퓨터나 스위치, 리피터 등과 연결을 처리)
  - 1(물리계층): RS-232C, EIA-422(트위스트 페어 케이블), EIA 카테고리(LAN케이블),광섬유 등 (케이블, 커넥트, 미디어 등의 차이를 처리)

### 4계층으로 생각하는 TCP/IP 모델

    인터넷을 기준으로 한 네트워크 통신 모델
    4계층으로 나뉘어 생각
    1,2계층을 1계층(네트워크 인터페이스 계층)
    3계층을 2계층(인터넷 계층)
    4계층을 3계층(전송계층)
    5,6,7계층을 4계층(응용계층)

<hr/>

## 4. TCP/IP

#### 인터넷으로 통신하기 위한 프로토콜

    TCP/IP는 인터넷에서 통신할 때 사용하는 기본 프로토콜

### 출발지와 목적지가 적힌 IP 프로토콜

- 프로토콜 분류
  - IP 프로토콜: UDP,TCP,HTTP 등 다른 프로토콜의 기본
    IP주소(출발지, 목적지 정보)를 참조하여 페이로드를 올바른 목적지에 전송하는 최소한의 절차와 규칙을 규정
    페이로드엔 UDP, TCP뿐만 아니라 상위계층의 프로토콜 데이터가 저장
  - UDP 프로토콜
  - TCP 프로토콜
    TCP/IP는 통신하는 패킷의 식별자로 IP주소를 사용하기 때문에 보통 'TCP/IP'라고 표현

### UDP 프로토콜과 TCP 프로토콜

    공통점: 식별자로써 각각 헤더에 포트번호를 부여해서 IP주소가 나타내는 사용자나 애플리케이션 종류 등을 지정

    UDP 프로토콜: 프로토콜은 포트번호를 부여, 처리과정은 IP프로토콜과 거의 똑같다
                수신 확인,전송 오류 확인, 재전송 처리 등은 수행x
                단순히 목적지맘ㄴ 지정해서 전송하는 데이터를 데이터그램(datagram)이라고 한다.

    TCP 프로토콜: 헤더에 포트번호가 부여됨
                오류 검사, 재전송 처리 등 일련의 과정도 규정되어있음
                세션 통신을 수행하는 기능있음
                헤더엔 오류 검사, 세션 통신에 필요한 정보(시퀀스 번호, 응답 확인 번호, 세션플래그 등)가 부여됨

- 용어 노트
  - 식별자: 대상을 식별하는 부호. ex) 패킷의 목적지를 식별하는 것은 목적지 IP 주소가 된다.
  - 세션: 목적지로 연결을 확인하고 통신 경로를 확보 및 유지하는 것이다
  - 세퀀스 번호: 큰 데이터를 여러 개의 패킷으로 분할할 때 사용하는 패킷 번호
  - 응답 확인 번호: 시퀀스 번호가 맞는지 확인하는 번호. 자기 다음에 와야하는 시퀀스 번호가 들어감
  - 세션 플래그: TCP 세션의 상태를 나타내는 다양한 플래그를 으의미

#### cf. 프로토콜의 용도

    - UDP 프로토콜: 신뢰성보단 속도와 편의성을 우선시해야 할 때 사용됨
    - TCP 프로토콜: 안정적인 통신을 원할 때 사용됨
    IP, UDP 프로토콜에서도 상위 애플리케이션에서 오류 검사 및 재전송 처리 등을 수행해서 기능을 보완할 수 있다.
